# OSI 7 계층

<img src="https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Ft1.daumcdn.net%2Fcfile%2Ftistory%2F995EFF355B74179035"/>

OSI 7 계층은 네트워크에서 통신이 일어나는 과정을 7단계로 나눈 것을 의미한다.

## 1. OSI 7 계층을 나눈 이유?

계층을 나눈 이유는 통신이 일어나는 과정이 단계별로 파악할 수 있기 때문이다.

흐름을 한눈에 알아보기 쉽고, 사람들이 이해하기 쉽고,
7단계 중 특정한 곳에 이상이 생기면 다른 단계의 장비 및 소프트웨어를 건들이지 않고도 이상이 생긴 단계만 고칠 수 있기 때문!

```
상황 : 컴퓨터 게임을 하다가 연결이 끊긴 상황!

1. 모든 PC가 문제가 있다면
    -> 라우터의 문제(3계층 네트워크 계층)이거나 광랜을 제공하는 회사의 회선 문제 (1계층 물리 계층)

2. 한 PC만 문제가 있는 상황
    
    2.1 게임 소프트웨어에 문제가 있다면 (7계층 어플리케이션 계층)
    2.2 게임 소프트웨어에 문제가 없고, 스위치에 문제가 있다면 (2계층 데이터링크 계층) 
```

## 2. 물리계층 (Physical Layer)

* 주로 전기적, 기계적, 기능적인 특성을 이용해서 통신 케이블로 데이터를 전송하게 된다.

* 통신 단위는 `비트!` -> 1, 0으로 이루어졌다.

* 단지 데이터를 전달만 할뿐 전송하려는 데이터가 무엇인지, 어떤 에러가 있는지 등에는 전혀 신경 쓰지 않는다.

* `즉 데이터가 무엇인지, 어떤 에러가 있는지 등에는 전혀 신경 쓰지 않는다!`

* 케이블, 리피터, 허브를 통해 데이터를 전송

<img src="https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Ft1.daumcdn.net%2Fcfile%2Ftistory%2F990DA13D5B73B8C615"/>
<img src="https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Ft1.daumcdn.net%2Fcfile%2Ftistory%2F9927F73D5B73B8C735"/>

## 3.1 데이터 링크계층 (DataLink Layer)

* 물리계층을 통해 송수신되는 정보의 오류와 흐름을 관리하여 ***안전한 정보의 전달***을 수행할 수 있도록 도와주는 역할

* 통신에서의 오류도 찾아주고 재전송도 하는 기능을 가지고 있다.

* **맥 주소**를 가지고 통신을 한다.

* 전송단위를 **프레임**이라고 부른다.

* 브리지, 스위치등으로 데이터를 전송

`브릿지나 스위치를 통해 맥주소를 가지고 물리계층에서 받은 정보를 전달하는 역할! (에러검출/재전송/흐름제어)`

## 3.2 이더넷 데이터 포멧

* 이더넷 : 데이터 링크 계층에서 신호를 주고 받을 규칙중 가장 많이 사용되는 규칙

* 이더넷은 여러 컴퓨터가 동시에 데이터를 전송해도 충돌이 일어나지 않는 구조를 가진다.

* 데이터를 보내는 시점을 늦추는 방법을 사용하는데 이더넷은 이 방법을 `CSMA/CD` 라고 한다.

> ### CSMA/CD이란?
> 반송파 감지 다중 접속 및 충돌 탐지라는 뜻을 가진다
<img src="https://velog.velcdn.com/images%2Fapril_5%2Fpost%2Ff1b59d35-c811-44f7-9583-eee7337e63ab%2Fimage.png"/>
>> * CS : **데이터를 보내려고 하는 컴퓨터가 케이블에 신호가 흐르고 있는지 아닌지를 확인한다** 는 규칙
>> * MA : **케이블에 데이터가 흐르고 있지 않다면 데이터를 보내도 좋다** 라는 규칙
>> * CD : **충돌이 발생하고 있는지를 확인한다** 는 규칙   
>   
> **하지만 지금은 효율이 좋지 않다는 이유로 CSMA/CD는 거의 사용하지 않고 스위치(switch)라는 네트워크 장비를 사용하여 충돌을 막는다!6**

<img src="https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FrhpvB%2FbtrnGi4XCui%2FHDxLfFs1UDG4BHdkpCzjZK%2Fimg.png"/>
   
* 프리앰블 : 이것은 이더넷 프레임이라는 의미의 8바이트의 특별한 비트 패턴 -> 이것을 보고 수신측에는 이더넷 프레임이 온다고 판단!

* 수신지/송신지 MAC 주소
    * Destination Address - 수신지 MAC 주소
    * Source Address - 송신지 MAC 주소

* 타입 : 네트워크 계층에서 어떤 프로토콜을 사용하는지 나타내는 2바이트의 ID -> IPv4는 0x0800, IPv6라면 0x86DD

* 페이로드 : 데이터 자체

* FCS : 에러체크를 위한 4바이트 필드

## 4. 네트워크 계층 (Network Layer)

* 데이터를 목적지까지 가장 안전하고 빠르게 전달

* 라우터(Router)를 통해 경로를 선택하고 주소를 정하고(IP) 경로(Route)에 따라 패킷을 전달 > IP 헤더 붙음

* 이 계층에서 전송되는 단위 : 패킷(Packet)

* 장비 : 라우터

## 5. 전송 계층 (Transport Layer)

* port 번호, 전송방식(TCP/UDP) -> TCP/UDP는 나중에 자세하게
    * TCP : 신뢰성, 연결지향적

    * UDP : 비신뢰성, 비연결성, 실시간

* 두 지점간의 신뢰성 있는 데이터를 주고 받게 해주는 역할

* 신호를 분산하고 다시 합치는 과정을 통해 에러와 경로를 제어

## 6. 세선 계층 (Session Layer)

* 주 지점간의 프로세스 및 통신하는 호스트 간의 연결 유지

* TCP/IP 세션 체결, 포트번호를 기반으로 통신 세션 구성

* API, Socket

## 7. 표현 계층 (Presentation Layer)

* 전송하는 데이터의 표현방식을 결정(ex. 데이터변환, 압축, 암호화 등)

* 파일인코딩, 명령어를 포장, 압축, 암호화

* JPEF, MPEG, GIF, ASCII 등

* 코드 간의 번역을 담당하여 데이터의 형식상 차이를 다루는 부담을 응용 계층(7 Layer)으로부터 덜어준다.

## 8. 응용 계층 (Application Layer)

* 최종 목적지로, 응용 프로세스와 직접 관계하여 일반적인 응용 서비스를 수행(ex. explore, chrome 등)

* 응용 프로세스와 직접 관계하여 일반적인 응용 서비스를 네트워크에 연결 및 수행하는 역할

* HTTP, FTP, SMTP, POP3, IMAP, Telnet 등과 같은 프로토콜이 있다.